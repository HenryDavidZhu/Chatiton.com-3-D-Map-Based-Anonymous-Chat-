var _0x527f=['moveend','queryRenderedFeatures','length','properties','city','returnCityData','keys','split','getSource','style.load','cities','get','circle','case','numUsers','#ff751a','#ffff4d','#66ff33','#ff4d4d','all','addLayer','clusters','#000000','latitude','flyTo'];(function(_0x4f631a,_0x24d576){var _0x21e407=function(_0x391331){while(--_0x391331){_0x4f631a['push'](_0x4f631a['shift']());}};_0x21e407(++_0x24d576);}(_0x527f,0x1cb));var _0x1b16=function(_0x4a39c9,_0x36f5b8){_0x4a39c9=_0x4a39c9-0x0;var _0x34494f=_0x527f[_0x4a39c9];return _0x34494f;};var cityMap={};var cityUserList={};var cityNames={};var userLong=0x0;var userLat=0x0;var cityLong=0x0;var cityLat=0x0;var flying=!![];map['on'](_0x1b16('0x0'),function(_0x2c364c){map['addSource'](_0x1b16('0x1'),{'type':'geojson','data':citiesJSON,'cluster':!![],'clusterMaxZoom':0xe,'clusterRadius':0x50,'clusterProperties':{'numUsers':['+',['number',[_0x1b16('0x2'),'numUsers'],0x0]]}});map['addLayer']({'id':_0x1b16('0x1'),'type':_0x1b16('0x3'),'source':_0x1b16('0x1'),'paint':{'circle-color':[_0x1b16('0x4'),['==',['get',_0x1b16('0x5')],null],'#ff4d4d',['all',['>=',[_0x1b16('0x2'),_0x1b16('0x5')],0x1],['<',[_0x1b16('0x2'),'numUsers'],0x5]],_0x1b16('0x6'),['all',['>=',[_0x1b16('0x2'),_0x1b16('0x5')],0x5],['<',[_0x1b16('0x2'),_0x1b16('0x5')],0xa]],_0x1b16('0x7'),['>=',['get',_0x1b16('0x5')],0xa],_0x1b16('0x8'),_0x1b16('0x9')],'circle-radius':[_0x1b16('0x4'),['==',[_0x1b16('0x2'),_0x1b16('0x5')],null],0x9,[_0x1b16('0xa'),['>=',[_0x1b16('0x2'),_0x1b16('0x5')],0x1],['<',[_0x1b16('0x2'),_0x1b16('0x5')],0x5]],0xc,[_0x1b16('0xa'),['>=',[_0x1b16('0x2'),'numUsers'],0x5],['<',[_0x1b16('0x2'),_0x1b16('0x5')],0xa]],0xe,['>=',[_0x1b16('0x2'),_0x1b16('0x5')],0xa],0x10,0x9],'circle-opacity':[_0x1b16('0x4'),['==',[_0x1b16('0x2'),_0x1b16('0x5')],null],0.7,['>=',[_0x1b16('0x2'),'numUsers'],0x1],0x1,0.7]}});map[_0x1b16('0xb')]({'id':_0x1b16('0xc'),'type':_0x1b16('0x3'),'source':'cities','filter':['>=','point_count',0x2],'paint':{'circle-color':_0x1b16('0xd'),'circle-radius':0xc,'circle-opacity':0x0}});$['getJSON']('https://api.ipdata.co/?api-key=982a1375474d4f171923e408626833ab269d418e63036d66243c8059',function(_0x1149b1){userLong=_0x1149b1['longitude'];userLat=_0x1149b1[_0x1b16('0xe')];flying=!![];map[_0x1b16('0xf')]({'center':[userLong,userLat]});map['on'](_0x1b16('0x10'),function(_0x2c364c){flying=![];});});});function updateCityNames(){var _0x53622b=map[_0x1b16('0x11')]({'layers':[_0x1b16('0x1')]});cityNames={};for(var _0x3a3ddf=0x0;_0x3a3ddf<_0x53622b[_0x1b16('0x12')];_0x3a3ddf++){var _0x3b9933=_0x53622b[_0x3a3ddf];if(_0x3b9933[_0x1b16('0x13')][_0x1b16('0x14')]){cityNames[_0x3b9933[_0x1b16('0x13')][_0x1b16('0x14')]]=_0x3b9933;}}}map['on'](_0x1b16('0x10'),onMoveEnd);function onMoveEnd(_0x5903c){updateCityNames();}socket['on'](_0x1b16('0x15'),updateCityData);function updateCityData(_0x5ba6ee){cityMap=_0x5ba6ee;}function renderCitySizes(_0x294696){var _0x2781de=Object[_0x1b16('0x16')](_0x294696);for(var _0xb0a31=0x0;_0xb0a31<_0x2781de[_0x1b16('0x12')];_0xb0a31++){var _0x1bdad4=_0x2781de[_0xb0a31];var _0x39fcbe=_0x1bdad4[_0x1b16('0x17')]('-')[0x1];featureById[_0x39fcbe]['properties'][_0x1b16('0x5')]=_0x294696[_0x1bdad4][_0x1b16('0x12')];}map[_0x1b16('0x18')](_0x1b16('0x1'))['setData'](citiesJSON);}
